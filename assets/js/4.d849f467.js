(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{190:function(t,e,o){"use strict";o.r(e);o(63),o(183);var n,a,s=o(184),r=o(64),i=o(185),l={name:"Detail",mixins:[r.a,i.a],data:function(){return{loaded:!1,loading:!0,tokenLink:"",tokenEmbed:"",currentNetwork:null,token:{}}},mounted:function(){this.currentNetwork=this.getParam("network")||this.network.default,this.initDapp()},methods:{initDapp:(a=Object(s.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.network.current=this.network.list[this.currentNetwork],t.prev=1,t.next=4,this.initWeb3(this.currentNetwork,!0);case 4:return t.next=6,this.getToken(this.getParam("address"));case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),alert(t.t0),document.location.href=this.$withBase("/");case 12:case"end":return t.stop()}},t,this,[[1,8]])})),function(){return a.apply(this,arguments)}),getToken:(n=Object(s.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=17;break}return this.token.address=e,this.initContract(this.token.address),t.next=5,this.contractGet("name");case 5:return this.token.name=t.sent,t.next=8,this.contractGet("symbol");case 8:return this.token.symbol=t.sent,t.next=11,this.contractGet("decimals");case 11:this.token.decimals=t.sent.valueOf(),this.token.logo=this.getParam("logo")?decodeURIComponent(this.getParam("logo")):"",this.token.name&&this.token.symbol&&this.token.decimals?(this.loaded=!0,this.tokenLink=window.location.origin+this.$withBase("/detail.html?address=".concat(this.token.address,"&network=").concat(this.currentNetwork,"&logo=").concat(this.token.logo)),this.tokenEmbed='<iframe src="'.concat(this.tokenLink,'&embedded=1" style="border:none; overflow:hidden; width: 520px; max-width: 100%; height: 240px" scrolling="no" frameborder="0" allowTransparency="true"></iframe>')):(alert("It seems that it is not a valid Token or you are on the wrong network"),this.loaded=!1),this.loading=!1,t.next=18;break;case 17:document.location.href=this.$withBase("/");case 18:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)}),watchToken:function(){if(this.metamask.installed)if(this.metamask.netId===this.network.current.id)try{this.web3Provider.sendAsync({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:this.token.address,symbol:this.token.symbol,decimals:this.token.decimals,image:this.token.logo}},id:Math.round(1e5*Math.random())},function(t,e){t?console.log(t.message):e.result?console.log("Token added"):(console.log(e),console.log("Some error"))})}catch(t){console.log(t)}else alert("Your MetaMask in on the wrong network. Please switch on "+this.network.current.name+" and try again!");else alert("Please install MetaMask and try again!")},shareToken:function(){this.$refs.shareModal.show()}}},c=o(5),d=Object(c.a)(l,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-row",[t.loading?o("b-col",{staticClass:"mt-4 p-0",attrs:{lg:"6","offset-lg":"3"}},[o("b-card",{attrs:{"bg-variant":"light"}},[o("ui--loader",{attrs:{loading:t.loading}})],1)],1):t._e(),t._v(" "),t.loading||t.loaded?t._e():o("b-col",{staticClass:"mt-4 p-0",attrs:{lg:"6","offset-lg":"3"}},[o("b-card",{attrs:{"bg-variant":"light"}},[o("blockquote",[t._v("Some error occurred")]),t._v(" "),o("router-link",{attrs:{to:t.$withBase("create.html")}},[t._v("Try adding your token")])],1)],1),t._v(" "),t.loaded?o("b-col",{staticClass:"mt-4 p-0",attrs:{lg:"6","offset-lg":"3"}},[o("b-card",{attrs:{"footer-class":"p-0"}},[o("b-media",[t.token.logo?o("b-img",{attrs:{slot:"aside",src:t.token.logo,rounded:"circle",width:"48",height:"48",alt:t.token.name},slot:"aside"}):t._e(),t._v(" "),o("h4",{staticClass:"card-title"},[t._v(t._s(t.token.name)+" ("+t._s(t.token.symbol)+")")]),t._v(" "),o("h6",{staticClass:"card-subtitle text-muted token-address"},[t._v(t._s(t.token.address))]),t._v(" "),o("small",{staticClass:"text-muted"},[t._v("Decimals: "+t._s(t.token.decimals))])],1),t._v(" "),o("div",{staticClass:"text-center",attrs:{slot:"footer"},slot:"footer"},[o("b-button",{staticClass:"text-secondary",attrs:{variant:"link"},on:{click:t.watchToken}},[o("small",[t._v("Add to MetaMask")])]),t._v(" "),o("b-button",{staticClass:"text-secondary",attrs:{variant:"link",href:this.network.current.etherscanLink+"/token/"+t.token.address,target:"_blank"}},[o("small",[t._v("View on Etherscan")])])],1)],1),t._v(" "),o("b-modal",{ref:"shareModal",attrs:{"hide-footer":"",title:"Share "+t.token.name+" page"}},[o("b-row",[o("b-col",{attrs:{lg:"12"}},[o("b-form-group",{attrs:{label:"Share link","label-for":"tokenLink"}},[o("b-form-input",{attrs:{id:"tokenLink",name:"tokenLink",placeholder:"Your token link",size:"lg",readonly:""},model:{value:t.tokenLink,callback:function(e){t.tokenLink="string"==typeof e?e.trim():e},expression:"tokenLink"}})],1)],1),t._v(" "),o("b-col",{attrs:{lg:"12"}},[o("b-form-group",{attrs:{label:"Embed code","label-for":"tokenEmbed"}},[o("b-form-input",{attrs:{id:"tokenEmbed",name:"tokenEmbed",placeholder:"Your token embed",size:"lg",readonly:""},model:{value:t.tokenEmbed,callback:function(e){t.tokenEmbed="string"==typeof e?e.trim():e},expression:"tokenEmbed"}})],1)],1)],1)],1)],1):t._e(),t._v(" "),o("b-col",{staticClass:"text-right p-0 pr-2",attrs:{lg:"6","offset-lg":"3"}},[t.embedded?o("b-link",{attrs:{href:t.$withBase("/"),target:"_blank"}},[o("small",{staticClass:"text-muted"},[t._v("Powered by WatchToken")])]):o("b-link",{on:{click:t.shareToken}},[o("small",{staticClass:"text-muted"},[t._v("Share or Embed")])])],1)],1)},[],!1,null,null,null);e.default=d.exports}}]);